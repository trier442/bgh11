<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³ 1 í•œê¸€ë§ì¶¤ë²• ê²©íŒŒí•˜ê¸°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        body {
            font-family: 'Jua', sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .container {
            background-color: #34495e;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            width: 90%;
            max-width: 600px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
            border: 1px solid #e67e22; /* ì£¼í™©ìƒ‰ í…Œë‘ë¦¬ */
        }

        h1 {
            color: #e67e22;
            margin-bottom: 20px;
            font-size: 2.2rem;
            word-break: keep-all;
            text-shadow: 2px 2px 0px #000;
        }

        p {
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 20px;
            color: #ecf0f1;
        }

        .warning-box {
            background-color: #e74c3c;
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            display: none; /* ì¹´í†¡ì¼ ë•Œë§Œ ë³´ì„ */
        }

        input[type="text"] {
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 10px;
            border: 2px solid #555;
            width: 70%;
            margin-bottom: 10px;
            font-family: 'Jua', sans-serif;
            text-align: center;
            background-color: #2c3e50;
            color: white;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #e67e22;
        }

        button {
            background-color: #d35400;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.3rem;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Jua', sans-serif;
            transition: transform 0.1s, background-color 0.2s;
            width: 100%;
            max-width: 250px;
            box-shadow: 0 4px 0 #a04000;
            margin-bottom: 10px;
        }

        button:hover {
            background-color: #e67e22;
        }

        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .test-btn {
            background-color: #f1c40f;
            color: #2c3e50;
            font-size: 1rem;
            padding: 10px;
            box-shadow: 0 4px 0 #f39c12;
        }
        
        .test-btn:hover {
            background-color: #f39c12;
        }

        /* í€´ì¦ˆ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #quiz-screen {
            text-align: left;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: #f1c40f;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            background: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #d35400;
            word-break: keep-all;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background-color: #ecf0f1;
            color: #2c3e50;
            text-align: left;
            padding: 16px 20px;
            border-radius: 10px;
            font-size: 1.15rem;
            line-height: 1.4;
            width: 100%;
            max-width: none;
            transition: background 0.2s;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .option-btn:hover {
            background-color: #bdc3c7;
        }

        .shake {
            animation: shake 0.5s;
            border-color: #c0392b !important;
            box-shadow: 0 0 15px #c0392b;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .wrong-message {
            color: #e74c3c;
            font-weight: bold;
            margin-top: 15px;
            min-height: 30px;
            text-align: center;
            font-size: 1.3rem;
            text-shadow: 1px 1px 0 #000;
        }

        .correct-message {
            color: #2ecc71;
            font-weight: bold;
            margin-top: 15px;
            min-height: 30px;
            text-align: center;
            font-size: 1.3rem;
            text-shadow: 1px 1px 0 #000;
        }

        /* ê²°ê³¼ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #result-screen h2 {
            font-size: 3rem;
            color: #f1c40f;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <!-- ì‹œì‘ í™”ë©´ -->
    <div class="container" id="start-screen">
        <h1>ğŸ’€ ê³ 1 í•œê¸€ë§ì¶¤ë²•<br>ì§€ì˜¥ì˜ ê²©íŒŒ í€´ì¦ˆ ğŸ’€</h1>
        
        <!-- ì¹´ì¹´ì˜¤í†¡ ê²½ê³  ë©”ì‹œì§€ -->
        <div id="kakao-warning" class="warning-box">
            ğŸ“¢ <strong>ì¹´ì¹´ì˜¤í†¡</strong>ìœ¼ë¡œ ì ‘ì†í•˜ì…¨êµ°ìš”!<br>
            ì†Œë¦¬ê°€ ì•ˆ ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
            í™”ë©´ ìš°ì¸¡ í•˜ë‹¨/ìƒë‹¨ì˜ <strong>[ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°]</strong>ë¥¼ ëˆŒëŸ¬ Chromeì´ë‚˜ Safariì—ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
        </div>

        <p>ì§„ì„ ì—¬ê³  ì¡±ë³´ì— ë‚˜ì˜¨ ë„ì–´ì“°ê¸°, ì‚¬ì´ì‹œì˜·,<br>ëœì†Œë¦¬ í‘œê¸° ë¬¸ì œ 20ê°œë‹¤.<br>í‹€ë¦¬ë©´ ì´ë¦„ ë¶€ë¥´ë©° ë¹„ì›ƒì–´ì£¼ë§ˆ.</p>
        
        <input type="text" id="username" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
        <br>
        <button onclick="startGame()">ë„ì „ ì‹œì‘</button>
        <button onclick="testSound()" class="test-btn">ğŸ”Š ëª©ì†Œë¦¬ í…ŒìŠ¤íŠ¸</button>
    </div>

    <!-- í€´ì¦ˆ í™”ë©´ -->
    <div class="container" id="quiz-screen" style="display: none;">
        <div class="question-header">
            <span>ë¬¸ì œ <span id="current-q-num">1</span> / 20</span>
            <span>ì ìˆ˜: <span id="score">0</span></span>
        </div>
        <div id="question-text" class="question-text">ë¬¸ì œ ë¡œë”©ì¤‘...</div>
        <div id="options" class="options"></div>
        <div id="feedback" class="wrong-message"></div>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div class="container" id="result-screen" style="display: none;">
        <h1>ê²°ê³¼ ë°œí‘œ</h1>
        <p>ë‹¹ì‹ ì˜ ìµœì¢… ì ìˆ˜ëŠ”?</p>
        <h2 id="final-score">0ì </h2>
        <p id="final-message">ë©”ì‹œì§€ ë¡œë”©ì¤‘...</p>
        <button onclick="location.reload()">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
    </div>

    <script>
        // ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ê°ì§€ ë° ê²½ê³  í‘œì‹œ
        if (navigator.userAgent.match(/KAKAOTALK/i)) {
            document.getElementById('kakao-warning').style.display = 'block';
        }

        // ì§„ì„ ì—¬ê³  ì¡±ë³´ ê¸°ë°˜ 20ë¬¸ì œ
        const questions = [
            {
                q: "[ë„ì–´ì“°ê¸°] ë‹¤ìŒ ì¤‘ ì˜¬ë°”ë¥¸ ë„ì–´ì“°ê¸°ëŠ”?",
                a: ["ë„ˆë°–ì— ì—†ì–´", "ë„ˆ ë°–ì— ì—†ì–´", "ë„ˆ ë°– ì— ì—†ì–´", "ë„ˆë°– ì—ì—†ì–´", "ë„ˆë°–ì—ì—†ì–´"],
                correct: 0 // ì¡°ì‚¬ëŠ” ì•ë§ì— ë¶™ì—¬ ì”€
            },
            {
                q: "[ë„ì–´ì“°ê¸°] ë‹¤ìŒ ì¤‘ ì˜¬ë°”ë¥¸ ë„ì–´ì“°ê¸°ëŠ”?",
                a: ["ì½© ì‹¬ì€ ë° ì½© ë‚˜ê³ ", "ì½© ì‹¬ì€ë° ì½© ë‚˜ê³ ", "ì½©ì‹¬ì€ ë° ì½© ë‚˜ê³ ", "ì½© ì‹¬ì€ ê³³ ì½© ë‚˜ê³ ", "ì½© ì‹¬ì€ êµ°ë° ì½© ë‚˜ê³ "],
                correct: 0 // 'ë°'ëŠ” ì˜ì¡´ëª…ì‚¬ì´ë¯€ë¡œ ë„ì–´ ì”€
            },
            {
                q: "[ë„ì–´ì“°ê¸°] ë‹¤ìŒ ì¤‘ ì˜¬ë°”ë¥¸ ë„ì–´ì“°ê¸°ëŠ”?",
                a: ["ë– ë‚œ ì§€ í•œì°¸ì´ ì§€ë‚¬ë‹¤", "ë– ë‚œì§€ í•œì°¸ì´ ì§€ë‚¬ë‹¤", "ë– ë‚œ ì§€ê°€ í•œì°¸ì´ë‹¤", "ë– ë‚œì§€ê°€ í•œì°¸ì´ë‹¤", "ë– ë‚œ ë•Œê°€ í•œì°¸ì´ë‹¤"],
                correct: 0 // ì‹œê°„ ê²½ê³¼ 'ì§€'ëŠ” ì˜ì¡´ëª…ì‚¬ì´ë¯€ë¡œ ë„ì–´ ì”€
            },
            {
                q: "[ë§ì¶¤ë²•] ê°•í’ì— ë‚˜ë¬´ê°€ ( ).",
                a: ["ì“°ëŸ¬ì¡Œë‹¤", "ì“¸ì–´ì¡Œë‹¤", "ìŠ¤ëŸ¬ì¡Œë‹¤", "ì“¸ëŸ¬ì¡Œë‹¤", "ìŠ¬ì–´ì¡Œë‹¤"],
                correct: 0 // ë³¸ëœ»ì´ ìœ ì§€ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì†Œë¦¬ëŒ€ë¡œ ì ìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ê°ì¶°ë‘” ë¹„ë°€ì´ ë“œë””ì–´ ( ).",
                a: ["ë“œëŸ¬ë‚¬ë‹¤", "ë“¤ì–´ë‚¬ë‹¤", "ë“¤ì–´ ë‚¬ë‹¤", "ë“œëŸ¬ ë‚¬ë‹¤", "ë“¤ì–´ ë†¨ë‹¤"],
                correct: 0 // 'ë“¤ë‹¤'ì˜ ëœ»ì´ ì—†ìœ¼ë¯€ë¡œ ì†Œë¦¬ëŒ€ë¡œ ì ìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] êµ­ì— ê³ ê¸°ë¥¼ ( ) ë„£ì—ˆë‹¤.",
                a: ["ë“¬ë¿", "ë“¬ë¶", "ë“¬í‘¹", "ë¤ë¿", "ë‘ ë¿"],
                correct: 0 // ëšœë ·í•œ ê¹Œë‹­ ì—†ì´ ë‚˜ëŠ” ëœì†Œë¦¬ëŠ” ëœì†Œë¦¬ë¡œ ì ìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ì„¤ë íƒ•ì—ëŠ” ( )ê°€ ì œë§›ì´ì§€.",
                a: ["ê¹ë‘ê¸°", "ê¹ëšœê¸°", "ê¹ëšì´", "ê°ë‘ê¸°", "ê³½ë‘ê¸°"],
                correct: 0 // ã„±ë°›ì¹¨ ë’¤ ëœì†Œë¦¬ëŠ” ëœì†Œë¦¬ë¡œ ì ì§€ ì•ŠìŒ (ê¹ë‘‘+ì´ -> ê¹ë‘ê¸°)
            },
            {
                q: "[ë§ì¶¤ë²•] ì•„ì¹¨ì— ì¼ì–´ë‚˜ë‹ˆ ëˆˆì— ( )ì´ ë¼ì—ˆë‹¤.",
                a: ["ëˆˆê³±", "ëˆˆê¼½", "ëˆˆê³º", "ëˆˆêµ½", "ëˆˆê¿‰"],
                correct: 0 // 'ëˆˆ' + 'ê³±'ì˜ í•©ì„±ì–´. ëœì†Œë¦¬ë¡œ ì†Œë¦¬ë‚˜ë„ ì ì§€ ì•ŠìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ì•„ì´ë“¤ì´ ( )ì„ í”¼ìš°ë©° ë†€ê³  ìˆë‹¤.",
                a: ["ë²•ì„", "ë²•ì©", "ë²•ì„­", "ë²…ì ", "ë²•ì„ì´"],
                correct: 0 // ã„±, ã…‚ ë°›ì¹¨ ë’¤ ëœì†Œë¦¬ëŠ” ëœì†Œë¦¬ë¡œ ì ì§€ ì•ŠìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ìƒ‰ì¢…ì´ë¥¼ ê°€ìœ„ë¡œ ( ) ì˜ëë‹¤.",
                a: ["ì‹¹ë‘‘", "ì‹¹ëš", "ì‚­ë‘‘", "ì‚­ëš", "ì‹¹ë…"],
                correct: 0 // ã„± ë°›ì¹¨ ë’¤ ëœì†Œë¦¬ì§€ë§Œ ëœì†Œë¦¬ë¡œ ì ì§€ ì•ŠìŒ
            },
            {
                q: "[ì‚¬ì´ì‹œì˜·] ì¥ë§ˆì² ì— ë‚´ë¦¬ëŠ” ë¹„ëŠ”?",
                a: ["ì¥ë§›ë¹„", "ì¥ë§ˆë¹„", "ì¥ë§ë¹„", "ì¥ë§™ë¹„", "ì¥ë§·ë¹„"],
                correct: 0 // ìˆœìš°ë¦¬ë§+ìˆœìš°ë¦¬ë§, ëœì†Œë¦¬ í˜„ìƒ -> ì‚¬ì´ì‹œì˜·
            },
            {
                q: "[ì‚¬ì´ì‹œì˜·] ê·¸ê²ƒì€ í”íˆ ìˆëŠ” ( )ì´ë‹¤.",
                a: ["ì˜ˆì‚¿ì¼", "ì˜ˆì‚¬ì¼", "ì˜›ì‚¬ì¼", "ì˜ˆì‚°ì¼", "ì˜Œì‚¿ì¼"],
                correct: 0 // í•œìì–´+ìˆœìš°ë¦¬ë§, ã„´ã„´ ë§ë‚¨ -> ì‚¬ì´ì‹œì˜·
            },
            {
                q: "[ì‚¬ì´ì‹œì˜·] êµ¬ë¦„ ì‚¬ì´ë¡œ ( )ì´ ë°©ê¸‹ ì›ƒì—ˆë‹¤.",
                a: ["í•´ë‹˜", "í–‡ë‹˜", "í•´ ë‹˜", "í–‡ ë‹˜", "í—¨ë‹˜"],
                correct: 0 // 'ë‹˜'ì€ ì ‘ë¯¸ì‚¬ì´ë¯€ë¡œ ì‚¬ì´ì‹œì˜·ì„ ì“°ì§€ ì•ŠìŒ (ì˜ˆì™¸ ì•„ë‹˜)
            },
            {
                q: "[ì‚¬ì´ì‹œì˜·] ( )ì—ì„œ ì¿µì¿µê±°ë¦¬ëŠ” ì†Œë¦¬ê°€ ë‚¬ë‹¤.",
                a: ["ìœ„ì¸µ", "ìœ—ì¸µ", "ìœ—ì¶©", "ìœ„ì¶©", "ìœ—ìŠ¹"],
                correct: 0 // 'ì¸µ'ì´ ê±°ì„¼ì†Œë¦¬(ã…Š)ì´ë¯€ë¡œ ì‚¬ì´ì‹œì˜· ì“°ì§€ ì•ŠìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ì„ ìƒë‹˜, ë‚´ì¼ ì—°êµ¬ì‹¤ë¡œ ( ) ë ê¹Œìš”?",
                a: ["ì°¾ì•„ë´¬ë„", "ì°¾ì•„ëµˆë„", "ì°¾ì•„ë°°ë„", "ì°¾ì•„ë² ë„", "ì°¾ì•„ë¶¸ë„"],
                correct: 0 // 'ì°¾ì•„ëµˆì–´ë„'ì˜ ì¤€ë§ -> ë´¬ë„
            },
            {
                q: "[ë§ì¶¤ë²•] ì§‘ì— ë„ì°©í•˜ë©´ ê¼­ ( ).",
                a: ["ì—°ë½í• ê²Œ", "ì—°ë½í• ê»˜", "ì—´ë½í• ê²Œ", "ì—´ë½í• ê»˜", "ì—°ë½í• ê¼"],
                correct: 0 // ì–´ë¯¸ '-(ìœ¼)ã„¹ê²Œ'ëŠ” ì˜ˆì‚¬ì†Œë¦¬ë¡œ ì ìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ê·¸ ì¼ì€ ì•„ì§ ì†ì— ( ) ì•Šë‹¤.",
                a: ["ìµìˆ™ì§€", "ìµìˆ™ì¹˜", "ìµì‘¥ì§€", "ìµì‘¥ì¹˜", "ìµìˆ™í‚¤"],
                correct: 0 // 'ìµìˆ™í•˜ì§€'ì˜ ì¤€ë§ (ã„±,ã…‚,ã…… ë’¤ì—ì„œ 'í•˜' ì „ì²´ íƒˆë½)
            },
            {
                q: "[ë§ì¶¤ë²•] ì˜¬í•´ ì·¨ì—… ( )ì´ ì‘ë…„ë³´ë‹¤ ì˜¬ëë‹¤.",
                a: ["ë°±ë¶„ìœ¨", "ë°±ë¶„ë¥ ", "ë°±ë¶„ì—´", "ë°±ë¶„ë ¬", "ë°±ë¶„ìœ¨(ì˜¤íƒ€ì•„ë‹˜)"],
                correct: 0 // ëª¨ìŒì´ë‚˜ ã„´ë°›ì¹¨ ë’¤ì—ëŠ” 'ìœ¨'ë¡œ ì ìŒ
            },
            {
                q: "[ë§ì¶¤ë²•] ì¡¸ì—…ì‹ì—ì„œ ì„ ë°°ê°€ ( )ì„ í–ˆë‹¤.",
                a: ["ì¸ì‚¬ë§", "ì¸ì‚¿ë§", "ì¸ì‚°ë§", "ì¸ì‚½ë§", "ì¸ì‚¬ë§ì”€"],
                correct: 0 // ì‚¬ì´ì‹œì˜· ì¡°ê±´ ì¶©ì¡± ì•ˆ í•¨ (ë°œìŒì´ [ì¸ì‚°ë§]ì´ ì•„ë‹˜)
            },
            {
                q: "[ë§ì¶¤ë²•] ë¬¼ê±´ì˜ ( )ë¥¼ ì •í™•íˆ ì„¸ì–´ë¼.",
                a: ["ê°œìˆ˜", "ê°¯ìˆ˜", "ê°°ìˆ˜", "ê°œì‘¤", "ê³„ìˆ˜"],
                correct: 0 // í•œìì–´+í•œìì–´ëŠ” ì‚¬ì´ì‹œì˜· ì•ˆ ì”€ (ì˜ˆì™¸ 6ê°œ ì•„ë‹˜)
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let userName = "";

        // TTS ê¸°ëŠ¥
        function speak(text) {
            try {
                if (!window.speechSynthesis) {
                    alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì§€ì›ì´ ì•ˆ ë©ë‹ˆë‹¤. í¬ë¡¬ì´ë‚˜ ì‚¬íŒŒë¦¬ë¥¼ ì´ìš©í•˜ì„¸ìš”.");
                    return;
                }
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 1.2;
                utterance.pitch = 0.8;
                utterance.onerror = function(e) { console.log("TTS Error:", e); };
                window.speechSynthesis.speak(utterance);
            } catch (e) {
                console.error("TTS failed:", e);
            }
        }

        // ëª©ì†Œë¦¬ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
        function testSound() {
            speak("ëª©ì†Œë¦¬ê°€ ì˜ ë“¤ë¦¬ë‚˜ìš”? ì¤€ë¹„ë˜ë©´ ë„ì „í•˜ì„¸ìš”!");
        }

        function startGame() {
            const input = document.getElementById('username');
            const startScreen = document.getElementById('start-screen');
            const quizScreen = document.getElementById('quiz-screen');

            if (input.value.trim() === "") {
                alert("ì´ë¦„ ì ìœ¼ë¼ê³  í–ˆë‹¤. ê²ë¨¹ì—ˆëƒ?");
                input.focus();
                return;
            }

            userName = input.value.trim();
            startScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            speak("");
            setTimeout(showQuestion, 100);
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }

            const qData = questions[currentQuestion];
            document.getElementById('current-q-num').innerText = currentQuestion + 1;
            document.getElementById('question-text').innerText = qData.q;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = "";
            
            const feedback = document.getElementById('feedback');
            feedback.innerText = "";
            feedback.className = "wrong-message";
            document.querySelector('.container').classList.remove('shake');

            // ë³´ê¸° ëœë¤ ì„ê¸°
            let indices = [0, 1, 2, 3, 4];
            indices.sort(() => Math.random() - 0.5);

            indices.forEach((idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = qData.a[idx];
                btn.onclick = function() { checkAnswer(idx, qData.correct, btn); };
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, correctIndex, btnElement) {
            if (document.getElementById('feedback').innerText !== "") return;

            const container = document.querySelector('.container');
            const feedback = document.getElementById('feedback');
            const optionBtns = document.querySelectorAll('.option-btn');

            if (selectedIndex === correctIndex) {
                score++;
                document.getElementById('score').innerText = score;
                feedback.className = "correct-message";
                feedback.innerText = "ì˜¤~ ì§„ì„ ì—¬ê³  1ë“±ê¸‰ ê°ì¸ë°? ì •ë‹µ!";
                btnElement.style.backgroundColor = "#2ecc71"; 
                btnElement.style.borderColor = "#2ecc71";
                setTimeout(nextQuestion, 1200);
            } else {
                container.classList.add('shake');
                feedback.className = "wrong-message";
                feedback.innerText = `í‹€ë ¸ì–´! ${userName}, ë§ì¶¤ë²• ê³µë¶€ ë‹¤ì‹œ í•´!`;
                btnElement.style.backgroundColor = "#e74c3c"; 
                
                // ì •ë‹µ í‘œì‹œ
                optionBtns.forEach(btn => {
                    if (btn.innerText === questions[currentQuestion].a[correctIndex]) {
                        btn.style.backgroundColor = "#2ecc71";
                        btn.style.color = "white";
                    }
                });

                const insults = [
                    `ì•¼ ${userName}! ì´ê²Œ í—·ê°ˆë¦¬ëƒ?`,
                    `${userName}, ì„¸ì¢…ëŒ€ì™•ë‹˜ì´ ìš°ì‹ ë‹¤!`,
                    `ì§„ì„ ì—¬ê³  ë‚´ì‹ ì€ ë¬¼ ê±´ë„ˆê°”ë‹¤!`,
                    `í‹€ë ¸ì–´! êµ­ì–´ ì±… ì¢€ ì½ì–´ë¼!`,
                    `ì•„ì´ê³  ${userName}ì•„, ì •ì‹  ì¢€ ì°¨ë ¤!`
                ];
                const randomInsult = insults[Math.floor(Math.random() * insults.length)];
                speak(randomInsult);

                setTimeout(() => {
                    container.classList.remove('shake');
                    nextQuestion();
                }, 2500);
            }
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function endGame() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            const finalScore = document.getElementById('final-score');
            finalScore.innerText = `${score} / 20`;
            
            const message = document.getElementById('final-message');
            if (score === 20) {
                message.innerText = `ì™„ë²½í•´! ${userName}, ë§ì¶¤ë²•ì˜ ì‹ ì´êµ¬ë‚˜!`;
                speak(`ì˜¤, ${userName}. ë§Œì ì´ë¼ë‹ˆ. ì¸ì •í•œë‹¤. ëŒ€ë‹¨í•´.`);
            } else if (score >= 15) {
                message.innerText = `ë‚˜ì˜ì§€ ì•Šì•„. 1ë“±ê¸‰ ê°€ëŠ¥ì„± ìˆë‹¤.`;
                speak(`${userName}, ìˆ˜ê³ í–ˆë‹¤. ì¡°ê¸ˆë§Œ ë” í•˜ë©´ ì™„ë²½í•´.`);
            } else {
                message.innerText = `ì‹¬ê°í•˜ë‹¤... ${userName}ì•„, êµ­ì–´ í•™ì› ë‹¤ì‹œ ë“±ë¡í•´ë¼.`;
                speak(`ì•¼, ${userName}. ì´ ì ìˆ˜ë¡œ ì‹œí—˜ ë³´ëŸ¬ ê°ˆ ê±°ëƒ? ê³µë¶€ ë” í•˜ê³  ì™€!`);
            }
        }

        document.getElementById('username').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                startGame();
            }
        });
    </script>
</body>
</html>